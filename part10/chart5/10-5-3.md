# 生成 Orderer 初始区块并进行查看

将编写好的 configtx.yaml 文件以及提前生成好的 crypto-config 目录都放到默认的 $FABRIC_CFG_PATH/ 路径下。

通过如下命令来指定 TwoOrgsOrdererGenesis profile 生成 Orderer 通道的初始块文件 orderer.genesis.block: 

```

$ configtxgen -profile TwoOrgsOrdererGenesis -outputBlock orderer.genesis.block
[common/configtx/tool] main -> INFO 001 Loading configuration
[common/configtx/tool] doOutputBlock -> INFO 002 Generating genesis block
[common/configtx/tool] doOutputBlock -> INFO 003 Writing genesis block

```

该区块的整体结构如图 10-1 所示，包括四个组的配置：channel, orderer, application 和 consortiums。


![系统通道初始区块的整体结构](http://oioe30uk4.bkt.clouddn.com/%E7%B3%BB%E7%BB%9F%E9%80%9A%E9%81%93%E5%88%9D%E5%A7%8B%E5%8C%BA%E5%9D%97%E7%9A%84%E6%95%B4%E4%BD%93%E7%BB%93%E6%9E%84.png)


其中包括：

- channel 组配置：包括 Hash 算法、数据块 Hash 结构以及默认的全局策略;
- orderer 组配置：包括 Orderer 相关配置、Orderer 组和策略以及务成员组织 的策略；
- application 组配置：包括 Application 组的策略，以及各 dmkm 组织的策略。这一部分配置在系统通道的初始区块中往往不包括；
- consortiums: 包括 Consortiums 组的策略、各个 Consortium 的策略以及其下组织的策略。

注意，ConfigEnvelope 结构中，Config 域用来记录是那首歌版本的配置内容，LastUpdate 域用来记录最近一次变更的内容（ConfigUpdate 结构）

可以通过如下命令来查看该区块内的通道配置部分（区块内 data.payload.data.config.ChannelGroup 部分）内容，系统通道名称采用默认的 testchainid:

```

$ configtxgen -profile TwoOrgsOrdererGenesis -inspectBlock orderer.genesis.block 
Config for channel: testchainid at sequence 0
{
    "Channel": {
        ...
    }
}
```

整个通道的配置构成树状结构，包括 Values, Policies, Groups 三大部分，如图所示。